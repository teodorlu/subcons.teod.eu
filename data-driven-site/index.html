<!doctype html>
<html><head><meta charset="utf-8" /><title>A data-driven approach to static sites</title><link href="style.css" rel="stylesheet" /><meta content="width=device-width, initial-scale=1" name="viewport" /><link href="/solarpunk1.svg" rel="icon" type="image/svg+xml" /></head><body><main><section><p><a href="..">..</a></p><h1 style="color: #252525">A data-driven approach to static sites</h1><p>My <a href="https://www.teodorheggelund.com/">old static site</a> setup was complex. I didn&apos;t really understand how it worked. And it took half an hour to compile. Why? I used <a href="https://jaspervdj.be/hakyll/">Hakyll</a> (which is great), and compiled Pandoc from source (which I don&apos;t recommend). I&apos;ve seriously enjoyed playing with <a href="https://medium.com/@kentbeck_7670/test-commit-revert-870bbd756864">TCR</a>. Technically, TCR nudges you to minimize the time from having your code in one working state, to having your code in another working state. I wanted something similar, but with the flexibility of playing around with raw HTML, and raw CSS. Also, I wanted something that&apos;s really simple to <em>escape</em> from. Take the repo, delete everything not HTML and CSS, and you have an archive. Built to last.</p><p><em>Tell me, how does it work?</em> I write straight into an <a href="https://github.com/teodorlu/subcons.teod.eu/blob/master/data-driven-site/index.edn">EDN file</a>. If anyone wants to learn structural editing, writing a blog post in EDN is great exercise. Then the <a href="https://github.com/teodorlu/subcons.teod.eu/blob/master/src/teod/subcons/build.clj">build system</a> picks up the data, dispatching based on metadata in the EDN file. Finally, an <a href="https://github.com/teodorlu/subcons.teod.eu/blob/master/data-driven-site/index.html">HTML file</a> is produced.</p><p>I didn&apos;t like that my old site isolated me from HTML and CSS. That&apos;s the worst way to learn. Writing HTML/CSS first - then <em>opting</em> into more structure when required is an alternative. Bonus - deploy times are really fast when Netlify&apos;s build is a pure file copy operation.</p><p><em>But .. writing in Markdown or Org-mode is kind of nice.</em> Sure! I&apos;m thinking of providing a <em>:teod.subcons/transformers</em>-transformer with functions for loading markdown or org-mode files. Then I can keep control of each page, and embed content where I want.</p><p><em>Sounds interesting?</em> Just steal this code and try. Or write your own static site mechanisms, it&apos;s quite fun.</p><p><strong>Future work.</strong> Error handling is ... not. Don&apos;t make your transformer chain too long. Also, I&apos;d like to experiment with &quot;embedding&quot; other kinds of content. Markdown, Org-mode, Vega JSON, etc.</p><p>Nods of thanks go to <a href="https://twitter.com/magnars/">Magnar Sveen</a>, <a href="https://twitter.com/jackrusher">Jack Rusher</a> for simple approaches to HTML with Clojure, and to <a href="https://twitter.com/jraregris">Oddmund Str√∏mme</a> for discussions related to TCR and other things.</p><p>View this page on web: <a href="https://subcons.teod.eu/data-driven-site/" target="_blank">https://subcons.teod.eu/data-driven-site/</a></p></section></main></body></html>